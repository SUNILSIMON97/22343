<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>роирогрпНрокройрпН AI - Setup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .setup-container {
            max-width: 600px;
            margin: 40px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .setup-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .setup-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .setup-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .setup-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .option-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .option-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-5px);
        }
        
        .option-card.selected {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .option-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .option-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .option-desc {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .name-input-section {
            margin-bottom: 30px;
        }
        
        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        
        .continue-button {
            width: 100%;
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            background: #FFD700;
            color: #333;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .continue-button:hover {
            background: #FFC700;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .continue-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="setup-header">
            <div class="setup-title">роирогрпНрокройрпН AI Setup</div>
            <div class="setup-subtitle">роЙроЩрпНроХ ро╡ро┐ро░рпБрокрпНрокродрпНродрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
        </div>
        
        <!-- Name Input -->
        <div class="name-input-section">
            <div class="section-title">
                <span>ЁЯСд</span>
                <span>роЙроЩрпНроХ рокрпЗро░рпБ роОройрпНрой?</span>
            </div>
            <input type="text" 
                   class="name-input" 
                   id="userName" 
                   placeholder="роЙроЩрпНроХ рокрпЗро░рпИ роЪрпКро▓рпНро▓рпБроЩрпНроХ..."
                   value="">
        </div>
        
        <!-- Slang Selection -->
        <div class="setup-section">
            <div class="section-title">
                <span>ЁЯЧ║я╕П</span>
                <span>роОроирпНрод рокро╛ро╖рпИропро┐ро▓рпН рокрпЗроЪрпБро╡рпЛроорпН?</span>
            </div>
            <div class="options-grid">
                <div class="option-card selected" data-slang="COMMON" onclick="selectSlang('COMMON')">
                    <div class="option-icon">ЁЯМН</div>
                    <div class="option-name">рокрпКродрпБро╡ро╛рой родрооро┐ро┤рпН</div>
                    <div class="option-desc">роОро▓рпНро▓ро╛ро░рпБроХрпНроХрпБроорпН рокрпБро░ро┐ропрпБроорпН</div>
                </div>
                
                <div class="option-card" data-slang="CHENNAI" onclick="selectSlang('CHENNAI')">
                    <div class="option-icon">ЁЯЪЙ</div>
                    <div class="option-name">роЪрпЖройрпНройрпИ</div>
                    <div class="option-desc">Machi, Gethu!</div>
                </div>
                
                <div class="option-card" data-slang="KOVAI" onclick="selectSlang('KOVAI')">
                    <div class="option-icon">ЁЯМД</div>
                    <div class="option-name">роХрпЛро╡рпИ</div>
                    <div class="option-desc">роЪро╛рооро┐, ро╡ро╛роЩрпНроХ!</div>
                </div>
                
                <div class="option-card" data-slang="MADURAI" onclick="selectSlang('MADURAI')">
                    <div class="option-icon">ЁЯЫХ</div>
                    <div class="option-name">роородрпБро░рпИ</div>
                    <div class="option-desc">роЕрогрпНрогрпЗ, роЪрпКро▓рпНро▓рпБ!</div>
                </div>
                
                <div class="option-card" data-slang="NELLAI" onclick="selectSlang('NELLAI')">
                    <div class="option-icon">ЁЯНм</div>
                    <div class="option-name">роирпЖро▓рпНро▓рпИ</div>
                    <div class="option-desc">роПро▓рпЗ, роХрпЗро│рпБ!</div>
                </div>
                
                <div class="option-card" data-slang="EELAM" onclick="selectSlang('EELAM')">
                    <div class="option-icon">ЁЯМ┤</div>
                    <div class="option-name">роИро┤роорпН</div>
                    <div class="option-desc">роОройрпНройрокрпНрокро╛, роЪрпБроХрооро╛?</div>
                </div>
            </div>
        </div>
        
        <!-- Persona Selection -->
        <div class="setup-section">
            <div class="section-title">
                <span>ЁЯОн</span>
                <span>роирогрпНрокройрпН роОрокрпНрокроЯро┐ роЗро░рпБроХрпНроХрогрпБроорпН?</span>
            </div>
            <div class="options-grid">
                <div class="option-card selected" data-persona="JALIANA" onclick="selectPersona('JALIANA')">
                    <div class="option-icon">ЁЯШД</div>
                    <div class="option-name">роЬро╛ро▓ро┐ропро╛рой</div>
                    <div class="option-desc">роЪрпЖроорпНроо роОройро░рпНроЬро┐ропро╛!</div>
                </div>
                
                <div class="option-card" data-persona="AMAITHIYANA" onclick="selectPersona('AMAITHIYANA')">
                    <div class="option-icon">ЁЯШМ</div>
                    <div class="option-name">роЕроорпИродро┐ропро╛рой</div>
                    <div class="option-desc">роЪро╛роирпНродрооро╛ рокрпЗроЪрпБроорпН</div>
                </div>
                
                <div class="option-card" data-persona="THELIVANA" onclick="selectPersona('THELIVANA')">
                    <div class="option-icon">ЁЯОп</div>
                    <div class="option-name">родрпЖро│ро┐ро╡ро╛рой</div>
                    <div class="option-desc">роирпЗро░роЯро┐ропро╛рой рокродро┐ро▓рпН</div>
                </div>
                
                <div class="option-card" data-persona="VILAKKAMAANA" onclick="selectPersona('VILAKKAMAANA')">
                    <div class="option-icon">ЁЯУЪ</div>
                    <div class="option-name">ро╡ро┐ро│роХрпНроХрооро╛рой</div>
                    <div class="option-desc">роЯрпАроЪрпНроЪро░рпН рооро╛родро┐ро░ро┐</div>
                </div>
            </div>
        </div>
        
        <button class="continue-button" onclick="saveAndContinue()">
            роЪро░ро┐, рокрпЗроЪро▓ро╛роорпН ро╡ро╛! ЁЯТм
        </button>
    </div>
    
    <script>
        let selectedSlang = 'COMMON';
        let selectedPersona = 'JALIANA';
        
        function selectSlang(slang) {
            selectedSlang = slang;
            
            // Remove selected class from all
            document.querySelectorAll('[data-slang]').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked
            document.querySelector(`[data-slang="${slang}"]`).classList.add('selected');
        }
        
        function selectPersona(persona) {
            selectedPersona = persona;
            
            // Remove selected class from all
            document.querySelectorAll('[data-persona]').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked
            document.querySelector(`[data-persona="${persona}"]`).classList.add('selected');
        }
        
        async function saveAndContinue() {
            const userName = document.getElementById('userName').value.trim();
            
            // Save preferences
            try {
                const response = await fetch('/api/save-preferences', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: userName,
                        slang: selectedSlang,
                        persona: selectedPersona,
                        voice_enabled: true
                    })
                });
                
                if (response.ok) {
                    // Redirect to chat
                    window.location.href = '/chat';
                } else {
                    alert('Error saving preferences. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Connection error. Please check your internet and try again.');
            }
        }
    </script>
</body>
</html>
