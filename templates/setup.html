<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>роирогрпНрокройрпН AI - Setup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile.css') }}">
    <style>
        :root {
            --bg-0: #050505;
            --bg-1: #0f0f0f;
            --gold: #c7a661;
            --gold-soft: rgba(199, 166, 97, 0.18);
            --text-1: #f2f2f2;
            --text-2: #b8b8b8;
        }

        body {
            background: radial-gradient(1200px 600px at 50% -200px, #1c1c1c 0%, #0b0b0b 40%, #050505 100%);
            min-height: 100vh;
            color: var(--text-1);
            font-family: "Noto Sans Tamil", "Poppins", "Segoe UI", sans-serif;
        }

        .setup-container {
            max-width: 680px;
            margin: 40px auto;
            padding: 26px;
            background: #0f0f0f;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.06);
            box-shadow: 0 20px 60px rgba(0,0,0,0.45);
        }

        .setup-header {
            text-align: left;
            margin-bottom: 20px;
        }

        .setup-title {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .setup-subtitle {
            font-size: 14px;
            color: var(--text-2);
        }

        .setup-section {
            margin-bottom: 26px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
        }

        .option-card {
            background: #121212;
            padding: 18px;
            border-radius: 16px;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.06);
            transition: all 0.2s ease;
            text-align: center;
            min-height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .option-card:hover {
            transform: translateY(-2px);
            border-color: rgba(199, 166, 97, 0.45);
        }

        .option-card.selected {
            border-color: var(--gold);
            background: linear-gradient(180deg, rgba(199,166,97,0.18), rgba(199,166,97,0.04));
            box-shadow: inset 0 0 0 1px rgba(199,166,97,0.35);
        }

        .option-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--gold);
        }

        .option-icon svg {
            width: 24px;
            height: 24px;
            stroke: var(--gold);
            fill: none;
            stroke-width: 1.6;
        }

        .option-name {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .option-desc {
            font-size: 11px;
            color: var(--text-2);
        }

        .name-input-section {
            margin-bottom: 22px;
        }

        .name-input {
            width: 100%;
            padding: 12px 14px;
            font-size: 14px;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            background: #121212;
            color: var(--text-1);
        }

        .continue-button {
            width: 100%;
            padding: 14px;
            font-size: 16px;
            font-weight: 700;
            background: linear-gradient(180deg, #d0b36f, #b8944c);
            color: #0b0b0b;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .continue-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(199, 166, 97, 0.35);
        }

        .continue-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="setup-header">
            <div class="setup-title">роОроирпНрод рооро╛родро┐ро░ро┐ роирогрпНрокройрпН?</div>
            <div class="setup-subtitle">роЙройрпН vibeтАСроХрпНроХрпБ роЪрпЖроЯрпН роЖроХрпБро▒ рооро╛родро┐ро░ро┐ рокрогрпНрогро┐роХрпНроХро▓ро╛роорпН.</div>
        </div>
        
        <!-- Name Input -->
        <div class="name-input-section">
            <div class="section-title">
                <span>ЁЯСд</span>
                <span>роЙроЩрпНроХ рокрпЗро░рпБ роОройрпНрой?</span>
            </div>
            <input type="text" 
                   class="name-input" 
                   id="userName" 
                   placeholder="роЙроЩрпНроХ рокрпЗро░рпИ роЪрпКро▓рпНро▓рпБроЩрпНроХ..."
                   value="">
        </div>
        
        <!-- Slang Selection -->
        <div class="setup-section">
            <div class="section-title">
                <span>ЁЯЧ║я╕П</span>
                <span>роОроирпНрод рокро╛ро╖рпИропро┐ро▓рпН рокрпЗроЪрпБро╡рпЛроорпН?</span>
            </div>
            <div class="options-grid">
                <div class="option-card selected" data-slang="COMMON" onclick="selectSlang('COMMON')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="8"></circle>
                            <path d="M4 12h16M12 4c2.5 3 2.5 13 0 16M12 4c-2.5 3-2.5 13 0 16"></path>
                        </svg>
                    </div>
                    <div class="option-name">рокрпКродрпБро╡ро╛рой родрооро┐ро┤рпН</div>
                    <div class="option-desc">роОро▓рпНро▓ро╛ро░рпБроХрпНроХрпБроорпН рокрпБро░ро┐ропрпБроорпН</div>
                </div>
                
                <div class="option-card" data-slang="CHENNAI" onclick="selectSlang('CHENNAI')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <rect x="5" y="6" width="14" height="10" rx="2"></rect>
                            <path d="M7 16l-2 3M17 16l2 3M8 10h2M14 10h2"></path>
                        </svg>
                    </div>
                    <div class="option-name">роЪрпЖройрпНройрпИ</div>
                    <div class="option-desc">Machi, Gethu!</div>
                </div>
                
                <div class="option-card" data-slang="KOVAI" onclick="selectSlang('KOVAI')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M3 18l6-7 4 5 3-3 5 5H3z"></path>
                            <circle cx="8" cy="8" r="2"></circle>
                        </svg>
                    </div>
                    <div class="option-name">роХрпЛро╡рпИ</div>
                    <div class="option-desc">роЪро╛рооро┐, ро╡ро╛роЩрпНроХ!</div>
                </div>
                
                <div class="option-card" data-slang="MADURAI" onclick="selectSlang('MADURAI')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M6 18h12M7 18V10l5-3 5 3v8M9 12h6"></path>
                        </svg>
                    </div>
                    <div class="option-name">роородрпБро░рпИ</div>
                    <div class="option-desc">роЕрогрпНрогрпЗ, роЪрпКро▓рпНро▓рпБ!</div>
                </div>
                
                <div class="option-card" data-slang="NELLAI" onclick="selectSlang('NELLAI')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4"></circle>
                            <path d="M5 10l-2 2 2 2M19 10l2 2-2 2"></path>
                        </svg>
                    </div>
                    <div class="option-name">роирпЖро▓рпНро▓рпИ</div>
                    <div class="option-desc">роПро▓рпЗ, роХрпЗро│рпБ!</div>
                </div>
                
                <div class="option-card" data-slang="EELAM" onclick="selectSlang('EELAM')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 6c2-2 5-3 8-2-2 2-4 3-7 3"></path>
                            <path d="M12 6c-2-2-5-3-8-2 2 2 4 3 7 3"></path>
                            <path d="M12 6v12"></path>
                            <path d="M9 18h6"></path>
                        </svg>
                    </div>
                    <div class="option-name">роИро┤роорпН</div>
                    <div class="option-desc">роОройрпНройрокрпНрокро╛, роЪрпБроХрооро╛?</div>
                </div>
            </div>
        </div>
        
        <!-- Persona Selection -->
        <div class="setup-section">
            <div class="section-title">
                <span>ЁЯОн</span>
                <span>роирогрпНрокройрпН роОрокрпНрокроЯро┐ роЗро░рпБроХрпНроХрогрпБроорпН?</span>
            </div>
            <div class="options-grid">
                <div class="option-card selected" data-persona="JALIANA" onclick="selectPersona('JALIANA')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="8"></circle>
                            <path d="M9 10h.01M15 10h.01M8.5 14c1.2 1.2 2.6 1.8 3.5 1.8 0.9 0 2.3-0.6 3.5-1.8"></path>
                        </svg>
                    </div>
                    <div class="option-name">роЬро╛ро▓ро┐ропро╛рой</div>
                    <div class="option-desc">роЪрпЖроорпНроо роОройро░рпНроЬро┐ропро╛!</div>
                </div>
                
                <div class="option-card" data-persona="AMAITHIYANA" onclick="selectPersona('AMAITHIYANA')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="8"></circle>
                            <path d="M9 11h.01M15 11h.01M9 15c1.5 1 4.5 1 6 0"></path>
                        </svg>
                    </div>
                    <div class="option-name">роЕроорпИродро┐ропро╛рой</div>
                    <div class="option-desc">роЪро╛роирпНродрооро╛ рокрпЗроЪрпБроорпН</div>
                </div>
                
                <div class="option-card" data-persona="THELIVANA" onclick="selectPersona('THELIVANA')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="7"></circle>
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 3v2M12 19v2M3 12h2M19 12h2"></path>
                        </svg>
                    </div>
                    <div class="option-name">родрпЖро│ро┐ро╡ро╛рой</div>
                    <div class="option-desc">роирпЗро░роЯро┐ропро╛рой рокродро┐ро▓рпН</div>
                </div>
                
                <div class="option-card" data-persona="VILAKKAMAANA" onclick="selectPersona('VILAKKAMAANA')">
                    <div class="option-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M5 6h6v12H5zM13 6h6v12h-6z"></path>
                        </svg>
                    </div>
                    <div class="option-name">ро╡ро┐ро│роХрпНроХрооро╛рой</div>
                    <div class="option-desc">роЯрпАроЪрпНроЪро░рпН рооро╛родро┐ро░ро┐</div>
                </div>
            </div>
        </div>
        
        <button class="continue-button" onclick="saveAndContinue()">
            роирогрпНрокройрпИ роЙро░рпБро╡ро╛роХрпНроХрпБ тЬж
        </button>
    </div>
    
    <script>
        let selectedSlang = 'COMMON';
        let selectedPersona = 'JALIANA';
        
        function selectSlang(slang) {
            selectedSlang = slang;
            
            // Remove selected class from all
            document.querySelectorAll('[data-slang]').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked
            document.querySelector(`[data-slang="${slang}"]`).classList.add('selected');
        }
        
        function selectPersona(persona) {
            selectedPersona = persona;
            
            // Remove selected class from all
            document.querySelectorAll('[data-persona]').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked
            document.querySelector(`[data-persona="${persona}"]`).classList.add('selected');
        }
        
        async function saveAndContinue() {
            const userName = document.getElementById('userName').value.trim();
            
            // Save preferences
            try {
                const response = await fetch('/api/save-preferences', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: userName,
                        slang: selectedSlang,
                        persona: selectedPersona,
                        voice_enabled: false
                    })
                });
                
                if (response.ok) {
                    // Redirect to chat
                    window.location.href = '/chat';
                } else {
                    alert('Error saving preferences. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Connection error. Please check your internet and try again.');
            }
        }
    </script>
</body>
</html>
